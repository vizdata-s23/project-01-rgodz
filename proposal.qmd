---
title: "Analyzing World Cup Goals"
subtitle: "Proposal"
format: html
editor: visual
---

```{r}
#| label: load-pkgs
#| message: false

library(tidyverse)
```

# Dataset

```{r}
#| label: load-data
#| message: false

matches <- read.csv("data/wcmatches.csv")
wc <- read.csv("data/worldcups.csv")
```

Our data visualization team, RGodz, has elected to use the FIFA World Cup data for our investigation. The 2022 World Cup recently came to a close in Qatar and was full of sensational story lines between FIFA's corruption leading up to the event, the likely end to Cristiano Ronaldo's international football career, and Lionel Messi's fairy-tale victory in the final against a star studded French side led by Kylian Mbappe. Considering all of the sensational headlines and buzz generated by this most recent installment of the World Cup, our team thought this data would be particularly exciting and relevant to analyze.

This FIFA World Cup data was made available on kaggle.com by user Evan Gower and can be found at https://www.kaggle.com/datasets/evangower/fifa-world-cup. The data is broken up into two datasets which we have renamed to `matches` and `wc` . It should be noted that while the most recent World Cup has sparked our interest in the data, the 2022 World Cup data is not included in these datasets and our team will discuss whether or not it makes sense for those observations to be added in the context of our project.

The `matches` dataset includes data from every single game played in the World Cup from the group stage through the final from Uruguay's 1930 tournament to Russia's in 2018. Its variables include specifications such as which teams played in a given match through the variables `home_team` and `away_team` as well as `outcome` which states whether the match ended in a win for the home team, a win for the away team, or a draw. The `matches` dataset has `r ncol(matches)` variables (which are all explained in the README.md file of our team's data folder) and thus `r ncol(matches)` columns along with `r nrow(matches)` rows/observations representing all of the World Cup matches played from 1930 to 2018.

Our second dataset, `wc`, includes more general information about these individual World Cups. It holds a variety of variables such as which nation hosted each tournament with variable `host`, which year it was played with variable `year`, and more information on which nations placed first through fourth. The `wc` dataset has `r ncol(wc)` columns for the `r ncol(wc)` variables (which are also explained in the README.md file of our team's data folder) and has `r nrow(wc)` rows/observations representing the `r nrow(wc)` World Cups that were hosted from 1930 to 2018.

# Questions

### 1: How has scoring been affected over time and does the round in which a match is played correlate with the number of goals scored in a match?

### 2: Is a team more likely to place in top 4, and are they more likely to be first, if their country hosted the tournament that year?

# Analysis plan

A plan for answering each of the questions including the variables involved, variables to be created (if any), external data to be merged in (if any).

To answer our first question, we will be looking at the variables `home_score`, `away_score`, `year`, and `stage`. We will have to create a new variable that can be called `total_goals` that is the sum of `home_score` and `away_score` since we are interested in the number of goals scored per match. Also, we will have to do some data manipulation with the `stage` variable so that all group stage games are under the same category, as they currently have different names based on the group name (i.e. "Group A", "Group B", etc.) but are all a part of the same round of a World Cup. For our visualization, our current plan is to create a violin plot for the distribution of goals scored for each year that is faceted by the round. So year will be on the x-axis and goals scored will be on the y-axis with each plot showing the distribution of the data points that came from a specific stage in the tournament. We will need to reorder the points so that the order of the faceted plots makes sense in context (such that the first plot shows the group stage distributions and the final round will be the last plot). There are multiple ways we can display the data from these three variables, however, so depending on how well the described graphic shows the relationships we are interested in we may decide to change how we plot them, but this is our current plan.

To answer our second question, we will be looking at the variables `host`, `winner`, `second`, `third`, and `fourth` from the `wc` dataset. We do not have to create any new variables to answer this question. Although depending on the initial data visualization observations, a potential follow up question could ask whether the total number of goals scored increases if the host is also the winner. If addressing this question, a new variable would be the same `total_goals` variable from question one. At this point, no external data needs to be merged in to answer this question. For our visualization, our current plan is to create a stacked bar plot. The x-axis would represent whether the country was in the top four or not in the top four. The two layers in each bar would represent whether the country was the host that year or not the host. The y-axis would represent the count of the number of times this occurred. If this doesn't show a correlation, we might experiment and change it so that the x-axis represents host or no host and the layers represent top four or not top four. This same chart would be duplicated except using just the winner category instead of top four.
